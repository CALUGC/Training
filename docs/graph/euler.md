# 歐拉迴路

## 命題

柯尼斯堡七橋問題可說是圖論最早的起源，問題如下（from 維基百科）："當時東普魯士柯尼斯堡（今日俄羅斯加里寧格勒）市區跨普列戈利亞河兩岸，河中心有兩個小島。小島與河的兩岸有七條橋連接。在所有橋都只能走一遍的前提下，如何才能把這個地方所有的橋都走遍？" 歐拉解決這個問題，圖論也因此誕生。

七橋問題根據起點與終點是否相同，分成 Euler path 及 Euler circuit。

## 無向圖

無向圖部分，將點分成奇點（度數為奇數）和偶點（度數為偶數）。

- Euler path：奇點數為 0 或 2
- Euler circuit：沒有奇點

### 證明 from wiki：

必要性：如果一個圖能一筆畫成，那麼對每一個頂點，要麼路徑中「進入」這個點的邊數等於「離開」這個點的邊數：這時點的度為偶數。要麼兩者相差一：這時這個點必然是起點或終點之一。注意到有起點就必然有終點，因此奇頂點的數目要麼是 0，要麼是 2。
充分性：如果圖中沒有奇頂點，那麼隨便選一個點出發，連一個環 $C_{1}$ 。如果這個環就是原圖，那麼結束。如果不是，那麼由於原圖是連通的，$ C\_{1}$ 和原圖的其它部分必然有公共頂點 $s\_{1}$ 。從這一點出發，在原圖的剩餘部分中重複上述步驟。由於原圖是連通圖，經過若干步後，全圖被分為一些環。由於兩個相連的環就是一個環，原來的圖也就是一個歐拉環了。如果圖中有兩個奇頂點 $u$ 和 $v$ ，那麼加多一條邊將它們連上後得到一個無奇頂點的連通圖。由上知這個圖是一個環，因此去掉新加的邊後成為一條路徑，起點和終點是 $u$ 和 $v$ 。證畢。

## 有向圖

有向圖部分，將點分成出點（出度 - 入度 = 1）和偶點（入度 - 出度 = 1）還有平衡點（出度 = 入度）。

- Euler path：出點和入點個數同時為 0 或 1。
- Euler circuit：只有平衡點。

找出一組解要使用 DFS，以下為算法框架

- 判斷無向圖判斷其點個數，如果 = 0，選任意一點 DFS，如果 = 2，選任意一奇點 DFS，否則無解。有向圖判斷出入點個數，如果只有平衡點，選任意一點 DFS，如果出點 = 入點 = 1，由出點 DFS，否則無解。
- DFS 若當前節點還有尚未走過的邊，那麼拜訪該邊，並在拜訪完後輸出該邊，否則離開當前結點。若還有節點尚未拜訪，則無解，否則輸出順序即為一組解（無向圖）/將輸出順序反向（有向圖）即為一組解。
